<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title data-i18n-key="meta_title_contact">Kontakt | Immobilien Schätzung + Beratung</title>
  <meta name="description" data-i18n-key="meta_description_contact" content="Nehmen Sie Kontakt mit uns auf für eine unverbindliche Erstberatung.">
  <link rel="icon" href="assets/favicon.svg" type="image/svg+xml">
  <link rel="manifest" href="manifest.webmanifest">
  <meta name="theme-color" content="#FAF8F5">
  <link rel="stylesheet" href="styles/colors.css">
  <link rel="stylesheet" href="styles/typography.css">
  <link rel="stylesheet" href="styles/main.css">
  <script src="scripts/i18n.js" defer></script>
  <script src="scripts/main.js" defer></script>
  <style>
    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
    .contact-actions button{cursor:pointer}
    .muted{opacity:.72}
  </style>
</head>
<body>
  <a href="#main-content" class="skip-link" data-i18n-key="skip_link">Zum Hauptinhalt springen</a>

  <header class="site-header">
    <div class="header-container">
      <a href="index.html" class="logo-link" aria-label="Homepage">
        <img src="assets/logo-static.svg" alt="Immobilien Schätzung + Beratung Logo" class="logo-static">
      </a>
      <nav class="main-nav" aria-label="Hauptnavigation">
        <button class="mobile-nav-toggle" aria-controls="nav-list" aria-expanded="false">
          <span class="sr-only" data-i18n-key="nav_toggle">Menü öffnen</span>
          <span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span>
        </button>
        <ul id="nav-list">
          <li><a href="services.html" data-i18n-key="nav_services">Leistungen</a></li>
          <li><a href="projects.html" data-i18n-key="nav_projects">Referenzen</a></li>
          <li><a href="about.html" data-i18n-key="nav_about">Über uns</a></li>
          <li><a href="contact.html" data-i18n-key="nav_contact" aria-current="page">Kontakt</a></li>
        </ul>
      </nav>
      <div class="lang-switcher">
        <button data-lang="de" class="active">DE</button>
        <button data-lang="en">EN</button>
      </div>
    </div>
  </header>

  <main id="main-content">
    <section id="contact-page" class="contact reveal-on-scroll">
      <div class="container">
        <div class="contact-card">
          <h1 class="section-title" data-i18n-key="contact_title">Kontaktieren Sie uns</h1>
          <p data-i18n-key="contact_intro">Wir freuen uns auf Ihre Anfrage für eine unverbindliche Erstberatung.</p>

          <div class="contact-grid">
            <!-- LEFT: Details (minimised + reveal-on-click) -->
            <div class="contact-details">
              <p>
                <strong data-i18n-key="contact_firm_name">Immobilien Schätzung + Beratung</strong><br>
              </p>

              <div class="contact-actions" aria-live="polite">
                <p class="muted" data-i18n-key="contact_pref">Bevorzugt: Nutzen Sie das Formular rechts.</p>

                <p>
                  <strong>E-Mail:</strong>
                  <button id="reveal-mail" type="button" aria-controls="mail-out" aria-expanded="false" rel="nofollow">anzeigen</button>
                  <span id="mail-out" class="sr-only" aria-hidden="true"></span>
                  <noscript>immobilien.schaetzung.beratung&nbsp;(at)&nbsp;g&nbsp;mail&nbsp;.&nbsp;com</noscript>
                </p>

                <p>
                  <strong>Telefon:</strong>
                  <button id="reveal-phone" type="button" aria-controls="phone-out" aria-expanded="false">anzeigen</button>
                  <span id="phone-out" class="sr-only" aria-hidden="true"></span>
                  <noscript>+41&nbsp;41&nbsp;878&nbsp;13&nbsp;13&nbsp;/&nbsp;+41&nbsp;79&nbsp;727&nbsp;30&nbsp;94</noscript>
                </p>
              </div>
            </div>

            <!-- RIGHT: Contact form (static-friendly, anti-spam without trackers) -->
            <form class="contact-form" action="#" method="post" autocomplete="on" novalidate>
              <!-- Honeypot (bots fill it; humans don't see it) -->
              <div class="sr-only" aria-hidden="true">
                <label for="company">Firma</label>
                <input type="text" id="company" name="company" tabindex="-1" autocomplete="off">
              </div>

              <!-- Timed submit (simple JS check) -->
              <input type="hidden" id="startedAt" name="startedAt" value="">

              <div class="form-group">
                <label for="name" data-i18n-key="contact_name_label">Name</label>
                <input type="text" id="name" name="name" required inputmode="text" autocomplete="name">
              </div>

              <div class="form-group">
                <label for="email" data-i18n-key="contact_email_label">E-Mail</label>
                <input type="email" id="email" name="email" required inputmode="email" autocomplete="email">
              </div>

              <div class="form-group">
                <label for="phone" data-i18n-key="contact_phone_label">Telefon (optional)</label>
                <input type="tel" id="phone" name="phone" inputmode="tel" autocomplete="tel">
              </div>

              <!-- NEW: Pflichtfeld Dropdown -->
              <div class="form-group">
                <label for="service" data-i18n-key="contact_service_label">Anliegen</label>
                <select id="service" name="service" required>
                  <option value="" selected disabled data-i18n-key="contact_service_placeholder">Bitte wählen…</option>
                  <option value="01 Verkehrswertgutachten">01 Verkehrswertgutachten</option>
                  <option value="02 Bauzustandsbewertungen">02 Bauzustandsbewertungen</option>
                  <option value="03 Projektmanagement (Neubau/Sanierung)">03 Projektmanagement (Neubau/Sanierung)</option>
                  <option value="04 Transaktionsberatung">04 Transaktionsberatung</option>
                </select>
              </div>

              <div class="form-group">
                <label for="message" data-i18n-key="contact_message_label">Nachricht</label>
                <textarea id="message" name="message" rows="4" required></textarea>
              </div>

              <!-- Lightweight human check (no tracking) -->
              <div class="form-group">
                <label for="human" data-i18n-key="contact_human_label">Bitte gib die Summe 3 + 4 ein</label>
                <input type="number" id="human" name="human" inputmode="numeric" pattern="[0-9]*" required>
              </div>

              <button type="submit" class="cta-button" data-i18n-key="contact_submit">Nachricht senden</button>

              <p id="form-note" class="muted" aria-live="polite"></p>
            </form>
          </div>

          <p class="muted" style="margin-top:1rem">
            Verantwortlich für den Inhalt: Dominik Planzer &amp; Françoise C. Ellenberger
          </p>
        </div>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container footer-container">
      <div class="footer-legal">
        &copy; <span id="current-year"></span> <span data-i18n-key="footer_long_name">Immobilien Schätzung + Beratung</span>.
        <a href="impressum.html" data-i18n-key="footer_imprint">Impressum</a> |
        <a href="datenschutz.html" data-i18n-key="footer_privacy">Datenschutz</a>
      </div>
      <div class="footer-social">
        <a href="#" aria-label="LinkedIn">LinkedIn</a>
      </div>
    </div>
  </footer>

  <script>
    // Year
    (function(){var y=document.getElementById('current-year'); if(y) y.textContent=new Date().getFullYear();})();

    // Helpers
    function zwj(str){return str.split('').join('\u200B');} // insert zero-width joiners (&#8203;)

    // Email reveal (assembled from harmless tokens; not present in initial DOM)
    (function(){
      var btn=document.getElementById('reveal-mail'), out=document.getElementById('mail-out');
      if(!btn||!out) return;
      var u=['immobilien','schaetzung','beratung'].join('.');
      var h=['g','mail'].join('');
      var t='com';
      var addr=u+'@'+h+'.'+t;
      btn.addEventListener('click',function(){
        btn.setAttribute('aria-expanded','true');
        out.className=''; out.removeAttribute('aria-hidden');
        out.innerHTML='<a rel="nofollow" href="mailto:'+addr+'">'+zwj(addr)+'</a>';
        btn.remove();
      })
    })();

    // Phone reveal (tokens; added on click)
    (function(){
      var btn=document.getElementById('reveal-phone'), out=document.getElementById('phone-out');
      if(!btn||!out) return;
      var p1=['+4','1'].join('');
      var n1=['41',' ','878',' ','13',' ','13'].join('');
      var n2=['79',' ','727',' ','30',' ','94'].join('');
      btn.addEventListener('click',function(){
        btn.setAttribute('aria-expanded','true');
        out.className=''; out.removeAttribute('aria-hidden');
        // make them real tel: links once revealed
        var a1=document.createElement('a'); a1.href='tel:+41418781313'; a1.textContent=p1+' '+n1;
        var sep=document.createTextNode(' / ');
        var a2=document.createElement('a'); a2.href='tel:+41797273094'; a2.textContent='+'+n2;
        out.append(a1,sep,a2);
        btn.remove();
      })
    })();

    // Anti-spam: set start time; block ultra-fast submits + honeypot check + simple math + required select
    (function(){
      var start=Date.now();
      var f=document.querySelector('.contact-form');
      var startedAt=document.getElementById('startedAt');
      if(startedAt) startedAt.value=String(start);

      if(!f) return;
      f.addEventListener('submit',function(e){
        var note=document.getElementById('form-note');

        // honeypot
        if(document.getElementById('company').value.trim()!==''){
          e.preventDefault(); if(note) note.textContent='Hinweis: Bitte Formular korrekt ausfüllen.'; return;
        }
        // time check (>= 5s)
        if(Date.now()-start<5000){
          e.preventDefault(); if(note) note.textContent='Bitte prüfe deine Eingaben und sende erneut.'; return;
        }
        // required dropdown
        var svc=document.getElementById('service');
        if(!svc || !svc.value){
          e.preventDefault(); if(note) note.textContent='Bitte wähle ein Anliegen aus.'; return;
        }
        // simple human check
        var h=document.getElementById('human');
        if(!h || String(h.value).trim()!=='7'){
          e.preventDefault(); if(note) note.textContent='Bitte gib die korrekte Summe ein.'; return;
        }
        // If you have no backend on GitHub Pages, handle via JS/email service here.
        // e.preventDefault(); // Integrate with your form handler (Formspree, Netlify, Xano, etc.).
      });
    })();
  </script>
</body>
</html>
